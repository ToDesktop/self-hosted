<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2057.2926125520144" height="675.0996827317273"><desc>title%20ToDesktop%20Self-Hosted%20Release%20Process%0A%0Aactor%20%22Developer%22%20as%20Dev%0Aparticipant%20%22ToDesktop%20Service%22%20as%20TD%0Aparticipant%20%22release-relay%22%20as%20Worker%0Aparticipant%20%22R2%20Bucket%20(Staging)%22%20as%20R2s%0Aparticipant%20%22GitHub%20Repo%22%20as%20GH%0Aparticipant%20%22GitHub%20Action%20(CI)%22%20as%20Action%0Aparticipant%20%22R2%20Bucket%20(Production)%22%20as%20R2p%0A%0ADev-%3ETD%3A%20%22Release%22%20from%20ToDesktop%20UI%20(including%20sec%20token)%0ATD-%3EWorker%3A%20Fire%20webhook%20with%20metadata%20(links%2C%20hashes%2C%20sizes)%0AWorker-%3EWorker%3A%20Verify%20payload%20integrity%0AWorker-%3ER2s%3A%20Download%20files%20from%20ToDesktop%20and%20upload%20to%20staging%20bucket%0AWorker-%3EGH%3A%20Create%20PR%20in%20your%20GitHub%20org%20with%20updated%20release%20metadata%0ADev-%3EGH%3A%20Review%20PR%20changes%20(version%2C%20hashes)%20and%20staging%20bucket%20contents.%20If%20happy%20then%20merge.%0AGH-%3EAction%3A%20Trigger%20workflow%20on%20PR%20merge%0AAction-%3ER2s%3A%20Retrieve%20new%20build%20files%20(from%20staging)%0AAction-%3ER2p%3A%20Upload%20files%20to%20production%20bucket</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="2057" height="675"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 42.20674448369141 138.55108203172728 L 42.20674448369141 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 417.2997992105143 138.55108203172728 L 417.2997992105143 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 787.6827404119466 138.55108203172728 L 787.6827404119466 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1228.201698459082 138.55108203172728 L 1228.201698459082 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1449.6744953537436 138.55108203172728 L 1449.6744953537436 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1694.0231500561524 138.55108203172728 L 1694.0231500561524 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1953.6330504861003 138.55108203172728 L 1953.6330504861003 675.0996827317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 52.234046201691406 64.13794822972729 A 10.027301717999999 10.027301717999999 0 1 1 52.23404118804097 64.1279209296805 M 42.20674448369141 74.16524994772728 L 42.20674448369141 95.62719397572727 M 29.54067915569141 81.90562320372729 L 54.87280981169141 81.90562320372729 M 42.20674448369141 95.62719397572727 L 29.54067915569141 115.68179741172727 M 42.20674448369141 95.62719397572727 L 54.87280981169141 115.68179741172727" stroke-miterlimit="10" stroke-width="2.990598758" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="8.795878700000003" y="133.27355481172728" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Developer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 337.1032453612018 91.2292546257273 L 497.4963530598268 91.2292546257273 L 497.4963530598268 138.55108203172728 L 337.1032453612018 138.55108203172728 L 337.1032453612018 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="356.1903021402018" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ToDesktop Service</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 726.2263522730833 91.2292546257273 L 849.1391285508099 91.2292546257273 L 849.1391285508099 138.55108203172728 L 726.2263522730833 138.55108203172728 L 726.2263522730833 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="745.3134090520833" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">release-relay</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1143.5205407279336 91.2292546257273 L 1312.8828561902305 91.2292546257273 L 1312.8828561902305 138.55108203172728 L 1143.5205407279336 138.55108203172728 L 1143.5205407279336 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1162.6075975069336" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">R2 Bucket (Staging)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1388.214498511267 91.2292546257273 L 1511.1344921962202 91.2292546257273 L 1511.1344921962202 138.55108203172728 L 1388.214498511267 138.55108203172728 L 1388.214498511267 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1407.301555290267" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GitHub Repo</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1615.4658173982461 91.2292546257273 L 1772.5804827140587 91.2292546257273 L 1772.5804827140587 138.55108203172728 L 1615.4658173982461 138.55108203172728 L 1615.4658173982461 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1634.5528741772462" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">GitHub Action (CI)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1858.7693671201862 91.2292546257273 L 2048.496733852014 91.2292546257273 L 2048.496733852014 138.55108203172728 L 1858.7693671201862 138.55108203172728 L 1858.7693671201862 91.2292546257273 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1877.8564238991862" y="120.95932463172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">R2 Bucket (Production)</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="835.8480072021484" y="26.547561167272725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ToDesktop Self-Hosted Release Process</text></g><g><rect fill="white" stroke="none" x="63.02365740702474" y="173.73459683172726" width="333.4592288801563" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="65.66242101702474" y="189.56717849172728" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">"Release" from ToDesktop UI (including sec token)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 42.20674448369141 196.60388145172726 L 402.815918951181 196.60388145172726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(417.2997992105143,196.60388145172726) translate(-417.2997992105143,-196.60388145172726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 402.64000137718097 189.27398253506058 L 417.2997992105143 196.60388145172726 L 402.64000137718097 203.93378036839394 Z"/></g></g><g><rect fill="white" stroke="none" x="438.11671213384767" y="222.99151755172724" width="328.7490848371875" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="440.7554757438477" y="238.82409921172726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fire webhook with metadata (links, hashes, sizes)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 417.2997992105143 245.86080217172724 L 773.1988601526133 245.86080217172724" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(787.6827404119466,245.86080217172724) translate(-787.6827404119466,-245.86080217172724)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 773.0229425786133 238.53090325506057 L 787.6827404119466 245.86080217172724 L 773.0229425786133 253.19070108839392 Z"/></g></g><g><rect fill="white" stroke="none" x="808.49965333528" y="272.24843827172725" width="152.779236204375" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="811.1384169452799" y="288.08101993172727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Verify payload integrity</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 787.6827404119466 295.1177228917273 L 858.0497700119466 295.1177228917273 L 858.0497700119466 317.98700751172726 L 802.1666206712799 317.98700751172726" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(787.6827404119466,317.98700751172726) translate(-787.6827404119466,-317.98700751172726)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 802.3425382452799 310.6571085950606 L 787.6827404119466 317.98700751172726 L 802.3425382452799 325.3169064283939 Z"/></g></g><g><rect fill="white" stroke="none" x="808.49965333528" y="344.37464361172727" width="398.88510168289065" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="811.1384169452799" y="360.2072252717273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Download files from ToDesktop and upload to staging bucket</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 787.6827404119466 367.24392823172724 L 1213.7178181997488 367.24392823172724" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1228.201698459082,367.24392823172724) translate(-1228.201698459082,-367.24392823172724)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1213.5419006257487 359.9140293150606 L 1228.201698459082 367.24392823172724 L 1213.5419006257487 374.5738271483939 Z"/></g></g><g><rect fill="white" stroke="none" x="918.0227339115171" y="393.63156433172725" width="401.3117679426563" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="920.661497521517" y="409.46414599172726" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create PR in your GitHub org with updated release metadata</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 787.6827404119466 416.5008489517272 L 1435.1906150944103 416.5008489517272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1449.6744953537436,416.5008489517272) translate(-1449.6744953537436,-416.5008489517272)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1435.0146975204102 409.17095003506057 L 1449.6744953537436 416.5008489517272 L 1435.0146975204102 423.83074786839387 Z"/></g></g><g><rect fill="white" stroke="none" x="454.4186470802019" y="442.88848505172723" width="583.0440067121875" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="457.0574106902019" y="458.72106671172725" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Review PR changes (version, hashes) and staging bucket contents. If happy then merge.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 42.20674448369141 465.7577696717272 L 1435.1906150944103 465.7577696717272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1449.6744953537436,465.7577696717272) translate(-1449.6744953537436,-465.7577696717272)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1435.0146975204102 458.42787075506055 L 1449.6744953537436 465.7577696717272 L 1435.0146975204102 473.08766858839385 Z"/></g></g><g><rect fill="white" stroke="none" x="1470.4914082770767" y="492.1454057717272" width="202.71482885574218" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1473.1301718870768" y="507.97798743172723" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Trigger workflow on PR merge</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1449.6744953537436 515.0146903917272 L 1679.539269796819 515.0146903917272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1694.0231500561524,515.0146903917272) translate(-1694.0231500561524,-515.0146903917272)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1679.363352222819 507.68479147506054 L 1694.0231500561524 515.0146903917272 L 1679.363352222819 522.3445893083939 Z"/></g></g><g><rect fill="white" stroke="none" x="1335.8502399322851" y="541.4023264917272" width="250.52436865066406" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1338.4890035422852" y="557.2349081517272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Retrieve new build files (from staging)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1694.0231500561524 564.2716111117272 L 1242.6855787184154 564.2716111117272" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1228.201698459082,564.2716111117272) translate(-1228.201698459082,-564.2716111117272)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1242.8614962924155 556.9417121950605 L 1228.201698459082 564.2716111117272 L 1242.8614962924155 571.6015100283939 Z"/></g></g><g><rect fill="white" stroke="none" x="1714.8400629794858" y="590.6592472117272" width="217.97607458328125" height="22.86928462"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1717.4788265894858" y="606.4918288717272" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Upload files to production bucket</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1694.0231500561524 613.5285318317273 L 1939.149170226767 613.5285318317273" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1953.6330504861003,613.5285318317273) translate(-1953.6330504861003,-613.5285318317273)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1938.9732526527669 606.1986329150606 L 1953.6330504861003 613.5285318317273 L 1938.9732526527669 620.858430748394 Z"/></g></g></g></g></svg>